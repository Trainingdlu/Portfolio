<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Immersive Flow</title>
    <style>
      * { -webkit-tap-highlight-color: transparent; }
      body { margin: 0; overflow: hidden; background: #000; }
      
      .back-btn {
        position: absolute;
        top: 20px;
        left: 20px;
        z-index: 10;
        text-decoration: none;
        color: rgba(255, 255, 255, 0);
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        font-family: 'Roboto', sans-serif;
        transition: all 0.3s ease;
        padding: 8px 16px;
        border-radius: 20px;
      }
      .back-btn:hover {
        color: rgba(255, 255, 255, 1);
        background: rgba(255, 255, 255, 0);
        backdrop-filter: blur(5px);
      }

      #vanta-canvas { width: 100vw; height: 100vh; display: block; }
    </style>
</head>
<body>
    <a href="index.html" class="back-btn">
        <span>Exit</span>
    </a>

    <div id="vanta-canvas"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanta/0.5.24/vanta.waves.min.js"></script>

    <script>
        const vantaEffect = VANTA.WAVES({
            el: "#vanta-canvas",
            mouseControls: true,
            touchControls: true,
            gyroControls: false,
            minHeight: 200.00,
            minWidth: 200.00,
            scale: 1.00,
            scaleMobile: 1.00,
            color: 0x111111,
            shininess: 75.00,
            waveHeight: 20.00,
            waveSpeed: 0.6,
            zoom: 0.75
        });

        const colorHelper = new THREE.Color();
        let hue = 0;
        function animateLoop() {
            hue += 0.0005; 
            if (hue > 1) hue = 0;
            colorHelper.setHSL(hue, 0.6, 0.15);
            vantaEffect.setOptions({ color: colorHelper.getHex() });
            requestAnimationFrame(animateLoop);
        }
        animateLoop();
                
        const SENSITIVITY = 35;
        const BETA_OFFSET = 15;
        
        let currentX = window.innerWidth / 2;
        let currentY = window.innerHeight / 2;

        window.addEventListener("deviceorientation", (event) => {
            
            const gamma = event.gamma || 0;
            const beta = event.beta || 0;

            let tiltX = gamma * SENSITIVITY;
            
            let tiltY = (beta - BETA_OFFSET) * SENSITIVITY;

            let targetX = (window.innerWidth / 2) + tiltX;
            let targetY = (window.innerHeight / 2) + tiltY;

            const clampX = Math.max(-100, Math.min(window.innerWidth + 100, targetX));
            const clampY = Math.max(-100, Math.min(window.innerHeight + 100, targetY));

            document.dispatchEvent(new MouseEvent("mousemove", {
                clientX: clampX,
                clientY: clampY,
                bubbles: true
            }));
        });

    </script>
</body>
</html>